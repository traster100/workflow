HTML DOM Parser
http://simplehtmldom.sourceforge.net

require_once 'simple_html_dom.php';

$a = 'строка';
$html = new simple_html_dom();
$html->load($a);
$items = $html->find('p a.class1.class2[name="name"] span');

Поиск от рута. Вернет массив элементов как тегов в коде(или пустой массив).
Если ("selector, 0") - вернет первый элемент как тег в коде(или NULL).
Можно несколько селекторов. Можно получать и присваивать значение. null - удалить

foreach ($items as $v) {
 $v->tag;
 $v->id;
 $v->class;
 $v->href;
 $v->innertext; // все что внутри тега, вместе с внутренними тегами
 $v->plaintext; // все что внутри тега, без тегов
 $v->outertext; // сам тег с наполнением, с тегами
}

$html->save(); // сохранение в строку

Очистка памяти
$html->clear();
unset($html);

$html3->children(); // Возвращает объект N-го ребенка-элемента если $index установлен, иначе массив детей-объектов
$html3->parent(); // Возвращает родителя элемента
$html3->first_child(); // Возвращает первого ребенка элемента или NULL если не найдено
$html3->last_child(); // Возвращает последнего ребенка элемента или NULL если не найдено
$html3->next_sibling(); // Возвращает следующий сестринский элемент или NULL если не найдено
$html3->prev_sibling(); // Возвращает предыдущий сестринский элемент или NULL если не найдено

[attribute] Элемент имеет такой аттрибут
[attribute="value"] Элемент имеет такой аттрибут, с таким значением
[attribute!="value"] Элемент имеет такой аттрибут, не с таким значением
[attribute^="value"] Элемент имеет такой аттрибут, первое значение которого начинается с "value"
[attribute$="value"] Элемент имеет такой аттрибут, последнее значение которого заканчивается на "value"
[attribute*="value"] Элемент имеет такой аттрибут, значение которого содержит "value"
Скачивание

zip
https://www.jetbrains.com/phpstorm/download/other.html

Делаем портабельным
\bin\idea.properties
idea.config.path=${idea.home.path}/.PhpStorm/config
idea.system.path=${idea.home.path}/.PhpStorm/system
idea.plugins.path=${idea.config.path}/plugins
idea.log.path=${idea.system.path}/log

Запуск
\bin\phpstorm64.exe
пробный период
-------------------------------------------------

Плагины

Сначала отключить, потом удалить, потом удалить сами папки в /plugins

Angular and AngularJS (папка AngularJS)
ASP (asp)
Drupal Support (drupal)
Joomla! Support (joomla)
Mercurial (hg4idea)
Vue.js (vuejs)
Vagrant (vagrant)
WordPress Support (wordPress)
Subversion (svn4idea)
PHP Docker (phpstorm-docker)
Docker (Docker)
Twig Support (twig)

Поставить

Php Inspections EA Extended
Проверка кода на уязвимость
Отключить сбор статистики
File | Settings | Php Inspections (EA Extended)
Automatically collect crash-reports

BrowseWordAtCaret
Подсветка одинаковых слов
-------------------------------------------------

Удаление лишнего

\jbr
\license
\help
\product-info.json
\build.txt
\bin\fsnotifier.exe
\bin\IdeaWin32.dll
\bin\jumplistbridge.dll
\bin\runnerw.exe
-------------------------------------------------

Настройки

Отключить обновление
File | Settings | Appearance & Behavior | System Settings | Updates
Automatically check updates for

Не отправлять статистику
File | Settings | Appearance & Behavior | System Settings | Data Sharing
Send usage statistics

Путь до git.exe
File | Settings | Version Control | Git
Path to Git executable G:\soft\Git\bin\git.exe

Путь до php.exe
File | Settings | Languages & Frameworks | PHP
G:\soft\OSPanel\modules\php\PHP-7.2-x64\php.exe

Окончание строки
File | Settings | Editor | Code Style
Line separator - Unix and macOS (\n)

Шаблон JS-файлов
File | Settings | Editor | File and Code Templates
JavaScript File
Написать 'use strict';

Маркеры в коде
File | Settings | Editor | TODO
\b(NOTE)\b.* Case Sensitive

Попап с браузерами убрать
File | Settings | Tools | Web Browsers
Show browser popup in the editor

Выбрать 1 браузер
File | Settings | Tools | Web Browsers
Name Chromium, family Chrome, Path G:\soft\Chromium\chrome.exe
Default Browser: First Listed

Размер шрифта в редакторе
File | Settings | Editor | Font
Size 18

Размер шрифта в редакторе менять колесом мыши
File | Settings | Editor | General
Change font size with Ctrl + Mouse Wheel

Размер шрифта в редакторе менять хоткеями
File | Settings | Keymap
Increase Font Size Alt+
Decrease Font Size Alt-
Reset Font Size Alt0

Вкладка Project
Open Files with Single Click
Always Select Opened File

Вкладка Structure
Navigate with Single Click
Always Select Opened Element

Табы в редакторе в несколько строк
File | Settings | Editor | General | Editor Tabs
Show tabs in one row снять

Перенос текста в редакторе
File | Settings | Editor | General
Soft-wrap these files: *.*

Открывать проекты в отдельном окне
File | Settings | Appearance & Behavior | System Settings
Open project in new window

Дефолтовая директория при открытии
File | Settings | Appearance & Behavior | System Settings
Default directory G:\domains

Удалить хоткеи
File | Settings | Keymap
Fold Selection / Remove region: Ctrl+.
Fold Code Block: Ctrl+Shift+.

Добавить хоткеи
File | Settings | Keymap
Comment with Line Comment: Ctrl+/ Ctrl+.
Comment with Block Comment: Ctrl+Shift+/ Ctrl+Shift+.
Toggle Full Screen mode: Ctrl+Shift+F11

Включить тулбар с иконками
View -> Appearance -> Toolbar

Выключить тулбар с путями
View -> Appearance -> Navigation Bar

Выключить тулбар хлебных крошек кода
File | Settings | Editor | General | Breadcrumbs
Show breadcrumbs

Добавить кнопки на тулбаре
VCS -> Show History
File -> Open
File -> Close Project
VCS -> Git -> Push
Tools -> Deployment
Tools -> Deployment -> Upload to Default Server
Tools -> Deployment -> Sync Local Subtree with Deployed

Выключить инспекцию проверки грамматики
File | Settings | Editor | Inspections
Proofreading

На табах не показывать расширения файлов
File | Settings | Editor | General | Editor Tabs
Show file extension

На табах не показывать крестик
File | Settings | Editor | General | Editor Tabs
Close button position -> None

Колво вкладок без закрытия остальных
File | Settings | Editor | General | Editor Tabs
Tab Limit 50

Цвет текущей строки
File | Settings | Editor | Color Scheme | General
Editor -> Caret row (Background 210 255 210)
было FCFAED

Цвет строки закладки
File | Settings | Editor | Color Scheme | General
Editor -> Bookmarks (Background: 210 210 255)

На табах звездочка если файл не сохранен
File | Settings | Editor | General | Editor Tabs
Mark modified (*)

Корректная работа Punto Switcher
File | Settings | Appearance & Behavior | Appearance
Disable mnemonics in menu
Disable mnemonics in controls

Отключить анимацию появления тулзов в режиме Undock
File | Settings | Appearance & Behavior | Appearance
Animate windows

Перенос текста в консоли
File | Settings | Editor | General | Console
Use soft wraps in console

Попап для кода вне видимости
File | Settings | Editor | General | Appearance
Show code lens on scrollbar hover

Выключить подсказки параметров в коде
File | Settings | Editor | Inlay Hints

Форматирование, комментарии
File | Settings | Editor | Code Style | PHP
File | Settings | Editor | Code Style | HTML
File | Settings | Editor | Code Style | JavaScript
Code Generation -> Line comment in first column

Форматирование, отступы
File | Settings | Editor | Code Style | PHP
File | Settings | Editor | Code Style | HTML
File | Settings | Editor | Code Style | JavaScript
File | Settings | Editor | Code Style | Style Sheets
Tabs and Indents всё на 2

Маленький шрифт на вкладках
File | Settings | Editor | General | Editor Tabs
Use small font for labels

Открывать новые вкладки с правого края
File | Settings | Editor | General | Editor Tabs
Open new tabs at the end

Горизонтальная линия между методами в классе
File | Settings | Editor | General | Appearance
Show method separators

Тулзы открываются горизонтально на всю ширину
File | Settings | Appearance & Behavior | Appearance
Widescreen tool window layout

Кастомное меню
File | Settings | Appearance & Behavior | Quick Lists
создаем кастомное меню menu1
в Keymap находим menu1 и вешаем хоткей Alt+D

Скобка { у класса и метода на этой же строке
File | Settings | Editor | Code Style | PHP
Wrapping and Braces -> Braces placement: всё на End of line
-------------------------------------------------

Макрос "Форматировать и Сохранить"

Edit -> Macros -> Start Macro Recording
Из меню нажимаем Форматировать, Сохранить
Edit -> Macros -> Stop Macro Recording

Называем макрос reformat_save

Edit -> Macros -> Edit Macros
Смотрим чтобы записалось Action:ReformatCode, Action:SaveAll

File | Settings | Keymap
Save All удалить хоткей Ctrl+S
reformat_save добавить хоткей Ctrl+S

При синхронизации Deployment -> Synchronize несуществующие локально файлы удаляем и с хоста
File | Settings | Build, Execution, Deployment | Deployment | Options
Delete target items when source ones do not exist (when transferring from Project view or Remote Host view)
-------------------------------------------------

YUI Compressor сжатие CSS и JS

https://www.jetbrains.com/help/phpstorm/compressing-css.html
https://www.jetbrains.com/help/phpstorm/minifying-javascript.html

Скачать и поставить nodejs.org
Поставить пакет  npm install yuicompressor

File | Settings | Tools | File Watchers
Добавить ватчер "YUI Compressor CSS"
Добавить ватчер "YUI Compressor JS"
Для обоих путь C:\Users\u\node_modules\.bin\yuicompressor.cmd

Сжимает CSS в строку, удаляет комменты.
Сжимает JS в строку, удаляет комменты, меняет названия переменных.
-------------------------------------------------

Параметры из старого редактора
Шрифт Consolas
Цвет фона F7FAFF
Цвет текущей строки CDCDE2

Хоткеи
Shift + F4 - открепить вкладку, когда внутри файла
Shift + Enter - открепить вкладку, когда на дереве файлов




xDebug

Указать путь до php.exe
Languages & Frameworks->PHP->PHP language level
Languages & Frameworks->PHP->CLI Interpreter
Рядом должна появится надпись Debugger: Xdebug 2.6.0

в OpenServer сделать закладку на Phpstorm и оттуда его запускать

в Хром поставить плагин для дебага и профилирования https://chrome.google.com/webstore/detail/xdebug-helper/eadndfjplgieldjbigjakmdgkmoaaaoc

Просмотр логов профилирования
Tools->Analyze Xdebug Profiler Snapshot

Настройка php.ini
[Xdebug]
zend_extension = "%sprogdir%/modules/php/%phpdriver%/ext/php_xdebug.dll"
xdebug.remote_enable = 1 ;Включение
xdebug.remote_handler = "dbgp" ;Протокол
xdebug.remote_host = "localhost" ;Сервер
xdebug.remote_port = 9000 ;Порт
xdebug.remote_mode = "req" ;Режим дебага
xdebug.remote_autostart = 0 ;НЕ стартовать автоматически

xdebug.idekey = "PHPSTORM" ;IDE-кей
xdebug.file_link_format = phpstorm://open?%f:%l ;чтобы кликать по строкам ошибок в браузере и сразу открывалось в phpstorm

xdebug.auto_trace = 0 ;НЕ включать трассировку
xdebug.trace_enable_trigger = 1 ;Позволяет включать трассировку на лету из IDE.
xdebug.trace_output_name = "trace_%H_%R" ;1файл на 1URL
xdebug.trace_output_dir = "%sprogdir%/userdata/temp/xdebug/"

xdebug.profiler_enable = 0 ;НЕ включать профайлер
xdebug.profiler_enable_trigger = 1 ;Позволяет включать профайлер на лету из IDE.
xdebug.profiler_output_name = "profiler_%H_%R" ;1файл на 1URL
xdebug.profiler_output_dir = "%sprogdir%/userdata/temp/xdebug/"

Работа в PhpStorm
Step Over выполнение кода построчно, минуя заходы в функции
Step Into выполнение кода построчно, с заходами в функции
Step Out выход из текущей функции, к строке кода сразу после неё
Run to Cursor выполнить до курсора
Resume Program переход к следующему брекпоинту и потом стоп

Отладочные функции xDebug

Все переменные в текущей области видимости
xdebug_get_declared_vars()

Трассировка стека до этого момента
xdebug_get_function_stack()

Трассировка текущего стека функции
xdebug_print_function_stack()

Глобальные массивы
xdebug_dump_superglobals()

Все заголовки
xdebug_get_headers()
headers_list()
get_headers()

Все классы
get_declared_classes()

Все константы
get_defined_constants(true)

Все функции
get_defined_functions(true)

Все переменные
get_defined_vars()

Разное

Поиск дубликатов кода
Code->Locate Duplicates

Тестирование регулярных выражений внутри preg_*
Alt+Enter->Check RegExp

Очистка кода. Разобраться что это
Code->Code Cleanup
-------------------------------------------------

Активировать

Установить кряк, в файле \bin\phpstorm64.exe.vmoptions:
-javaagent:/fullpath/crack.jar

Перейти Configure->Manage License->License server
http://fls.jetbrains-agent.com

https://rutracker.org/forum/viewtopic.php?t=5764245
https://zhile.io/2018/08/17/jetbrains-license-server-crack.html

ПРОВЕРКА КОДА НА УЯЗВИМОСТЬ

1. Плагин PhpStorm "Php Inspections ​(EA Extended)​"
https://plugins.jetbrains.com/plugin/7622-php-inspections-ea-extended
Доки по ошибкам https://github.com/kalessil/phpinspectionsea/tree/master/docs
Статический анализ

Проверка файла - Alt+Shift+I
Проверка папки - правый клик на папке, и Inspect Code

Ctrl+Alt+Shift+I - запуск проверки по имени
Ctrl+Shift+F4 - закрыть результаты проверки

Автоматическое исправление: из окна инспекции, под желтой лампочкой в коде

2. OWASP ZAP
https://www.owasp.org/index.php/OWASP_Zed_Attack_Proxy_Project
https://segment.com/blog/hacking-with-a-heads-up-display/
https://www.youtube.com/channel/UC-3qyzm4f29C12KGp3-12bQ
Динамический анализ